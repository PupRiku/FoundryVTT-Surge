<form class='{{cssClass}}' autocomplete='off'>

  {{! Sheet Header }}
  <header class='sheet-header'>
    <img
      class='profile-img'
      src='{{actor.img}}'
      data-edit='img'
      title='{{actor.name}}'
      height='100'
      width='100'
    />
    <div class='header-fields'>
      <h1 class='charname'><input
          name='name'
          type='text'
          value='{{actor.name}}'
          placeholder='Character Name'
        /></h1>
      <div class='header-details'>
        <span>Actions: {{calculatedActions.max}}</span>
        {{! We can add Species/Trait here later if desired }}
      </div>
    </div>
    {{! Level Block - Moved to the end of the header }}
    <div class='level-block'>
      {{! Use the label defined in template.json }}
      <label class='level-label'>{{systemData.details.level.label}}</label>
      <span class='level-value'>{{systemData.details.level.value}}</span>
    </div>
  </header>

  {{! Sheet Body }}
  <section class='sheet-body'>

    {{! Placeholder for Tabs Navigation }}
    <nav class='sheet-tabs tabs' data-group='primary'>
      <a class='item active' data-tab='main'>Main</a>
      <a class='item' data-tab='description'>Biography</a>
      <a class='item' data-tab='items'>Inventory</a>
      {{! Add more tabs as needed (e.g., Spells, Notes) }}
    </nav>

    {{! Main Tab Content }}
    <div class='tab main' data-group='primary' data-tab='main'>
      <h2>Attributes</h2>
      <div class='attributes-list flexcol'>
        {{! Using flexcol for vertical list }}
        {{! Loop through attributes defined in template.json }}
        {{#each systemData.attributes as |attribute key|}}
          <div class='attribute-item flexrow'>
            {{! Each attribute is a row }}
            <label
              class='attribute-label rollable'
              data-attribute='{{key}}'
              title='Click to roll {{attribute.label}}'
            >{{attribute.label}}</label>
            <input
              class='attribute-value'
              type='number'
              name='system.attributes.{{key}}.value'
              value='{{attribute.value}}'
              data-dtype='Number'
            />
          </div>
        {{/each}}
      </div>
      <hr />
      {{! Skills Section }}
      <h2>Skills</h2>
      <div class='skills-list flexcol'>
        {{! Container for the skills list }}
        {{! Loop through skills defined in systemData.skills }}
        {{#each systemData.skills as |skill key|}}
          <div class='skill-item flexrow'>
            {{! Row for each skill }}
            <label
              class='skill-label rollable'
              data-skill='{{key}}'
              title='Click to roll {{skill.label}}'
            >{{skill.label}}</label>
            <input
              class='skill-value'
              type='number'
              name='system.skills.{{key}}.value'
              value='{{skill.value}}'
              data-dtype='Number'
            />
          </div>
        {{/each}}
      </div>
      <hr />
      {{! Add another separator after skills }}
      {{! Passives Section }}
      <h2>Passives</h2>
      <div class='passives-list flexcol'>
        {{! Hit Points }}
        <div class='passive-item flexrow resource'>
          {{! Added resource class for potential styling }}
          <label>Hit Points (HP)</label>
          <div class='resource-value flexrow'>
            {{! Group value/max }}
            <input
              type='number'
              name='system.passives.hp.value'
              value='{{systemData.passives.hp.value}}'
              placeholder='Current'
              data-dtype='Number'
            />
            <span> / </span>
            {{! Display Max HP - make input disabled as it's calculated }}
            <input
              type='number'
              name='system.passives.hp.max'
              value='{{systemData.passives.hp.max}}'
              placeholder='Max'
              data-dtype='Number'
              disabled
              title='Max HP = Starting Max + En-Counter'
            />
          </div>
        </div>
        {{! Actions per Turn }}
        <div class='passive-item flexrow'>
          <label>{{calculatedActions.label}}</label>
          {{! Display calculated max actions - not editable }}
          <span class='passive-value'>{{calculatedActions.max}}</span>
        </div>
        {{! En-Counter }}
        <div class='passive-item flexrow'>
          <label>{{systemData.passives.encounter.label}}</label>
          <input
            class='passive-value'
            type='number'
            name='system.passives.encounter.value'
            value='{{systemData.passives.encounter.value}}'
            data-dtype='Number'
          />
        </div>
        {{! Recovery Points }}
        <div class='passive-item flexrow'>
          <label>{{systemData.passives.recovery.label}}</label>
          {{! Display static value from species/template - not editable }}
          <span
            class='passive-value'
          >{{systemData.passives.recovery.value}}</span>
        </div>
        {{! Menace }}
        <div class='passive-item flexrow'>
          <label>{{systemData.passives.menace.label}}</label>
          {{! Display calculated total menace - not directly editable }}
          <span
            class='passive-value'
            title='Base: {{systemData.passives.menace.base}} (Calculated total from base + equipment)'
          >{{systemData.passives.menace.total}}</span>
        </div>
        {{! Movement Speed }}
        <div class='passive-item flexrow'>
          <label>{{systemData.passives.movement.label}}</label>
          <input
            class='passive-value'
            type='number'
            name='system.passives.movement.value'
            value='{{systemData.passives.movement.value}}'
            data-dtype='Number'
          />
          {{! Optional: Add a tooltip for special movement rules }}
          <span
            class='tooltip-marker'
            title='{{systemData.passives.movement.special}}'
          >?</span>
        </div>
      </div>
      <hr />
      {{! Separator after passives }}
      <p>More content coming soon...</p>

    </div>

    {{! Biography Tab Content }}
    <div class='tab description' data-group='primary' data-tab='description'>
      <h2>Biography</h2>
      {{! Use Foundry's rich text editor helper }}
      {{editor
        systemData.biography.appearance
        target='system.biography.appearance'
        button=true
        owner=owner
        editable=editable
      }}
      {{! Add other biography fields (origin, allies, etc.) here later }}
      <p>More biography fields coming soon...</p>
    </div>

    {{! Inventory Tab Content }}
    <div class='tab items' data-group='primary' data-tab='items'>
      <h2>Inventory</h2>
      {{! We will add the item list here later }}
      <p>Inventory display coming soon...</p>
    </div>
  </section>
  {{! End Sheet Body }}
</form>