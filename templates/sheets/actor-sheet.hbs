<form class='{{cssClass}}' autocomplete='off'>

  {{! Sheet Header }}
  <header class='sheet-header'>
    {{! Overall header container }}

    {{! Contains Image | Name | Level }}
    <div class='header-top-row'>
      {{! Profile Image }}
      <img
        class='profile-img'
        src='{{actor.img}}'
        data-edit='img'
        title='{{actor.name}}'
        height='100'
        width='100'
      />

      {{! Name Block }}
      <div class='charname-block'>
        <h1 class='charname'><input
            name='name'
            type='text'
            value='{{actor.name}}'
            placeholder='Character Name'
          /></h1>
        {{! Old header-details div removed/empty }}
      </div>

      {{! Level Block }}
      <div class='level-block'>
        <label class='level-label'>{{systemData.details.level.label}}</label>
        <span class='level-value'>{{systemData.details.level.value}}</span>
      </div>
    </div>
    {{! End header-top-row }}

    {{! Passives Grid (Placed below top row) }}
    <div class='header-passives-grid'>
      {{! Row 1 }}
      <div class='passive-grid-item hp'>
        <label title='Hit Points'>HP</label>
        <div class='resource-value flexrow'>
          <input
            type='number'
            name='system.passives.hp.value'
            value='{{systemData.passives.hp.value}}'
            placeholder='Current'
            data-dtype='Number'
          />
          <span> / </span>
          <input
            type='number'
            name='system.passives.hp.max'
            value='{{systemData.passives.hp.max}}'
            placeholder='Max'
            data-dtype='Number'
            disabled
            title='Max HP = Starting Max + En-Counter'
          />
        </div>
      </div>
      <div class='passive-grid-item recovery'>
        <label title='{{systemData.passives.recovery.label}}'>Recovery</label>
        <span
          class='passive-value'
        >{{systemData.passives.recovery.value}}</span>
      </div>
      <div class='passive-grid-item movement'>
        <label title='{{systemData.passives.movement.label}}'>Movement</label>
        <input
          class='passive-value'
          type='number'
          name='system.passives.movement.value'
          value='{{systemData.passives.movement.value}}'
          data-dtype='Number'
        />
      </div>

      {{! Row 2 }}
      <div class='passive-grid-item actions'>
        <label title='{{calculatedActions.label}}'>Actions</label>
        <span class='passive-value'>{{calculatedActions.max}}</span>
      </div>
      <div class='passive-grid-item encounter'>
        <label
          title='{{systemData.passives.encounter.label}}'
        >En-Counter</label>
        <input
          class='passive-value'
          type='number'
          name='system.passives.encounter.value'
          value='{{systemData.passives.encounter.value}}'
          data-dtype='Number'
        />
      </div>
      <div class='passive-grid-item menace'>
        <label title='{{systemData.passives.menace.label}}'>Menace</label>
        <span
          class='passive-value'
          title='Base: {{systemData.passives.menace.base}} (Total = Base + Equip)'
        >{{systemData.passives.menace.total}}</span>
      </div>
    </div>
    {{! End header-passives-grid }}

  </header>
  {{! End Sheet Header }}

  {{! Sheet Body }}
  <section class='sheet-body'>

    {{! Placeholder for Tabs Navigation }}
    <nav class='sheet-tabs tabs' data-group='primary'>
      <a class='item active' data-tab='main'>Main</a>
      <a class='item' data-tab='description'>Biography</a>
      <a class='item' data-tab='items'>Inventory</a>
      {{! Add more tabs as needed (e.g., Spells, Notes) }}
    </nav>

    {{! Main Tab Content }}
    <div class='tab main' data-group='primary' data-tab='main'>
      <h2>Attributes</h2>
      <div class='attributes-list flexcol'>
        {{! Using flexcol for vertical list }}
        {{! Loop through attributes defined in template.json }}
        {{#each systemData.attributes as |attribute key|}}
          <div class='attribute-item flexrow'>
            {{! Each attribute is a row }}
            <label
              class='attribute-label rollable'
              data-attribute='{{key}}'
              title='Click to roll {{attribute.label}}'
            >{{attribute.label}}</label>
            <input
              class='attribute-value'
              type='number'
              name='system.attributes.{{key}}.value'
              value='{{attribute.value}}'
              data-dtype='Number'
            />
          </div>
        {{/each}}
      </div>
      <hr />
      {{! Skills Section }}
      <h2>Skills</h2>
      <div class='skills-list flexcol'>
        {{! Container for the skills list }}
        {{! Loop through skills defined in systemData.skills }}
        {{#each systemData.skills as |skill key|}}
          <div class='skill-item flexrow'>
            {{! Row for each skill }}
            <label
              class='skill-label rollable'
              data-skill='{{key}}'
              title='Click to roll {{skill.label}}'
            >{{skill.label}}</label>
            <input
              class='skill-value'
              type='number'
              name='system.skills.{{key}}.value'
              value='{{skill.value}}'
              data-dtype='Number'
            />
          </div>
        {{/each}}
      </div>
      <hr />
      {{! Add another separator after skills }}
      <p>More content coming soon...</p>

    </div>

    {{! Biography Tab Content }}
    <div class='tab description' data-group='primary' data-tab='description'>
      <h2>Biography</h2>
      {{! Use Foundry's rich text editor helper }}
      {{editor
        systemData.biography.appearance
        target='system.biography.appearance'
        button=true
        owner=owner
        editable=editable
      }}
      {{! Add other biography fields (origin, allies, etc.) here later }}
      <p>More biography fields coming soon...</p>
    </div>

    {{! Inventory Tab Content }}
    <div class='tab items' data-group='primary' data-tab='items'>
      <h2>Inventory</h2>
      {{! We will add the item list here later }}
      <p>Inventory display coming soon...</p>
    </div>
  </section>
  {{! End Sheet Body }}
</form>